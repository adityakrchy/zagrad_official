import React, { useState, useEffect } from "react";
import pincodeData from '../../../pincodes.json';
// import Sidebar from "../layout/Sidebar";
import Sidebar from "@/components/layout/Sidebar"

import { countries } from "countries-list";

const YourComponent = () => {
  const [pinCode, setPinCode] = useState('');
  const [pinCodeInfo, setPinCodeInfo] = useState(null);

  // Function to handle pin code input change
  const handlePinCodeChange = (e) => {
    setPinCode(e.target.value);
  };

  // Function to fetch information based on the pin code
  const fetchPinCodeInfo = () => {
    const data = pincodeData[pinCode];

    if (data) {
      setPinCodeInfo(data);
    } else {
      setPinCodeInfo(null);
    }
  };

  // Use useEffect to fetch information when pin code changes
  useEffect(() => {
    if (pinCode.length === 6) {
      fetchPinCodeInfo();
    }
  }, [pinCode]);

  const indianStates = [
    'Andhra Pradesh',
    'Arunachal Pradesh',
    'Assam',
    'Bihar',
    'Chhattisgarh',
    'Goa',
    'Gujarat',
    'Haryana',
    'Himachal Pradesh',
    'Jharkhand',
    'Karnataka',
    'Kerala',
    'Madhya Pradesh',
    'Maharashtra',
    'Manipur',
    'Meghalaya',
    'Mizoram',
    'Nagaland',
    'Odisha',
    'Punjab',
    'Rajasthan',
    'Sikkim',
    'Tamil Nadu',
    'Telangana',
    'Tripura',
    'Uttar Pradesh',
    'Uttarakhand',
    'West Bengal',
  ];

  const NewAddress = () => {
    const countriesList = Object.values(countries);

    return (
      <>
        <section className="py-10">
          <div className="container max-w-screen-xl mx-auto px-4">
            <div className="flex flex-col md:flex-row -mx-4">
              <Sidebar />
              <main className="md:w-2/3 lg:w-3/4 px-4">
                <div
                  style={{ maxWidth: "480px" }}
                  className="mt-1 mb-20 p-4 md:p-7 mx-auto rounded bg-white shadow-lg"
                >
                  <form>
                    <h2 className="mb-5 text-2xl font-semibold">
                      Add new Address
                    </h2>

                    <div className="mb-4 md:col-span-2">
                      <label className="block mb-1"> Address* </label>
                      <input
                        className="appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full"
                        type="text"
                        placeholder="Type your address"
                        required
                      />
                    </div>
                    <div className="mb-4 md:col-span-2">
                      <label className="block mb-1"> Email* </label>
                      <input
                        className="appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full"
                        type="email"
                        placeholder="Type your Email"
                        required
                      />
                    </div>

                    <div className="grid md:grid-cols-2 gap-x-3">
                      <div className="mb-4 md:col-span-1">
                        <label className="block mb-1"> City </label>
                        <input
                          className="appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full"
                          type="text"
                          placeholder="Type your city"
                          required
                        />
                      </div>

                      {/* <div className="mb-4 md:col-span-1">
                      <label className="block mb-1"> State </label>
                      <input
                        className="appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full"
                        type="text"
                        placeholder="Type state here"
                        required
                      />
                    </div> */}
                      <div className="mb-4 md:col-span-1">
                        <label className="block mb-1">State</label>
                        <select
                          className="appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full"
                          required
                        >
                          {/* Default/placeholder option */}
                          <option value="" disabled selected>
                            Select a State
                          </option>

                          {/* Options for Indian states */}
                          {indianStates.map((state) => (
                            <option key={state} value={state}>
                              {state}
                            </option>
                          ))}
                        </select>
                      </div>
                    </div>

                    {/* <div className="grid md:grid-cols-2 gap-x-2">
                    <div className="mb-4 md:col-span-1">
                      <label className="block mb-1"> ZIP code </label>
                      <input
                        className="appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full"
                        type="number"
                        placeholder="Type zip code here"
                        required
                      />
                    </div>

                    <div className="mb-4 md:col-span-1">
                      <label className="block mb-1"> Phone No </label>
                      <input
                        className="appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full"
                        type="number"
                        placeholder="Type phone no here"
                        required
                      />
                    </div>
                  </div> */}

                    <div>
                      <label htmlFor="pinCode">Enter Pin Code:</label>
                      <input
                        type="text"
                        id="pinCode"
                        name="pinCode"
                        value={pinCode}
                        onChange={handlePinCodeChange}
                        maxLength={6}
                      />

                      {pinCodeInfo && (
                        <div>
                          <h3>Pin Code Information:</h3>
                          <p>State: {pinCodeInfo.state}</p>
                          <p>City: {pinCodeInfo.city}</p>
                          <p>Address: {pinCodeInfo.address}</p>
                        </div>
                      )}
                    </div>

                    {/* <div className="mb-4 md:col-span-2">
                    <label className="block mb-1"> Country </label>
                    <select className="appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full">
                      {countriesList.map((country) => (
                        <option key={country.name} value={country.name}>
                          {country.name}
                        </option>
                      ))}
                    </select>
                  </div> */}
                    <div className="mb-4 md:col-span-2">
                      <label className="block mb-1">Country</label>
                      <select className="appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full" required>
                        {/* Default/placeholder option */}
                        <option value="" disabled selected>
                          Select a Country
                        </option>

                        {/* Options from the countriesList */}
                        {countriesList.map((country) => (
                          <option key={country.name} value={country.name}>
                            {country.name}
                          </option>
                        ))}
                      </select>
                    </div>


                    <button
                      type="submit"
                      className="my-2 px-4 py-2 text-center w-full inline-block text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700"
                    >
                      Add
                    </button>
                  </form>
                </div>
              </main>
            </div>
          </div>
        </section>
      </>
    );
  };

  export default NewAddress;
